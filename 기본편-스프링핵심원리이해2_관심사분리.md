기본편 - 스프링핵심원리이해2

이전 내용과 이어지고 10% 고정할인으로 바꿔달라고 요구

![1](/Users/mac/Desktop/1.png)

![2](/Users/mac/Desktop/2.png)

DIP를 지킨 것 같지만 추상화에 의존해야하는데 구체화(FixDiscountPolicy, RateDiscountPolicy)에 의존한다.

![3](/Users/mac/Desktop/3.png)

따라서 OrderServiceImpl의 소스코드 변경이 필요하다

![4](/Users/mac/Desktop/4.png)

기대했던 의존관계를 통해 인터페이스만 의존했다 생각

![5](/Users/mac/Desktop/5.png)

실제론 구체화에 의존하고있는 코드를 발견

어떻게 해결할 수 있을까?

![6](/Users/mac/Desktop/6.png)

![7](/Users/mac/Desktop/7.png)

->OrderServiceImpl에 DiscountPolicy 구현체를 대신 생성하고 주입 시켜야한다.

![8](/Users/mac/Desktop/8.png)

생성자 주입을 통해 추상화에만 의존하도록 DIP를 깨지 않게 유지

-> 추상화에만 의존시켜 구체화가 무엇인지 절대 모르도록

*Command + D : 과거 히스토리가 다 나오는 단축키

![9](/Users/mac/Desktop/9.png)

결론

![10](/Users/mac/Desktop/10.png)

결론 상세 설명

![11](/Users/mac/Desktop/11.png)

회원 객체 인스턴스 다이어그램

![12](/Users/mac/Desktop/12.png)

마무리

![13](/Users/mac/Desktop/13.png)