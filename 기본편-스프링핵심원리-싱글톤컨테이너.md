기본편 - 스프링핵심원리-싱글톤컨테이너



## 1. 웹 어플리케이션과 싱글톤

![스크린샷 2021-08-28 오후 4.43.17](/Users/mac/Desktop/스크린샷 2021-08-28 오후 4.43.17.png)



![스크린샷 2021-08-28 오후 4.43.52](/Users/mac/Library/Application Support/typora-user-images/스크린샷 2021-08-28 오후 4.43.52.png)

->여기서 문제는 각 고객 요청이 올때마다 새로운 객체 생성을 하기 때문에 문제

해결책

![스크린샷 2021-08-28 오후 4.56.25](/Users/mac/Desktop/스크린샷 2021-08-28 오후 4.56.25.png)



## 2. 싱글톤 패턴

![스크린샷 2021-08-28 오후 5.07.13](/Users/mac/Desktop/스크린샷 2021-08-28 오후 5.07.13.png)

![스크린샷 2021-08-28 오후 5.05.22](/Users/mac/Desktop/스크린샷 2021-08-28 오후 5.05.22.png)

수행 방식

![스크린샷 2021-08-28 오후 5.06.51](/Users/mac/Desktop/스크린샷 2021-08-28 오후 5.06.51.png)



결론

![스크린샷 2021-08-28 오후 5.24.37](/Users/mac/Desktop/스크린샷 2021-08-28 오후 5.24.37.png)



## 3. 싱글톤 컨테이너

![스크린샷 2021-08-28 오후 5.35.17](/Users/mac/Desktop/스크린샷 2021-08-28 오후 5.35.17.png)



싱글톤 컨테이너 적용 후

![스크린샷 2021-08-28 오후 5.37.26](/Users/mac/Desktop/스크린샷 2021-08-28 오후 5.37.26.png)



## 4. 싱글톤 방식의 주의점

![스크린샷 2021-08-30 오후 4.13.55](/Users/mac/Desktop/스크린샷 2021-08-30 오후 4.13.55.png)



실습을 통한 문제점 체험

![스크린샷 2021-08-30 오후 4.41.54](/Users/mac/Desktop/스크린샷 2021-08-30 오후 4.41.54.png)

-> 내부 필드의 상태를 변화시키는 것이 문제이다

해결책

![스크린샷 2021-08-30 오후 4.46.29](/Users/mac/Desktop/스크린샷 2021-08-30 오후 4.46.29.png)



## 5. Configuration과 싱글톤

![스크린샷 2021-08-30 오후 5.39.32](/Users/mac/Desktop/스크린샷 2021-08-30 오후 5.39.32.png)

-> MemorymemberRepository가 2번 호출 되면서 싱글톤이 깨지는 것 처럼 보인다



![스크린샷 2021-08-30 오후 5.44.09](/Users/mac/Desktop/스크린샷 2021-08-30 오후 5.44.09.png)

->해당코드에서 총 5번의 호출이 나와야하지만 3번의 호출만 나왔다.

![스크린샷 2021-08-30 오후 5.42.13](/Users/mac/Desktop/스크린샷 2021-08-30 오후 5.42.13.png)

답은 @Configuration에 있다.

## 6. Configuration

AppConfig의 클래스 이름을 출력해보면

![스크린샷 2021-08-30 오후 6.07.40](/Users/mac/Desktop/스크린샷 2021-08-30 오후 6.07.40.png)

이렇게 나오는데 원래 AppConfig까지만 나오는 결과가 맞다.

이유는

![스크린샷 2021-08-30 오후 6.06.46](/Users/mac/Desktop/스크린샷 2021-08-30 오후 6.06.46.png)

![스크린샷 2021-08-30 오후 6.09.07](/Users/mac/Desktop/스크린샷 2021-08-30 오후 6.09.07.png)

결론

![스크린샷 2021-08-30 오후 6.13.19](/Users/mac/Desktop/스크린샷 2021-08-30 오후 6.13.19.png)

한 번 등록된 빈을 조회하면 등록된 빈을 반환하고, 없으면 생성해서 빈으로 등록하고 반환하는 덕분에 싱글톤이 보장된다.

마무리

![스크린샷 2021-08-30 오후 6.21.25](/Users/mac/Desktop/스크린샷 2021-08-30 오후 6.21.25.png)